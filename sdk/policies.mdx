---
title: "Policies"
description: "Evaluate policies with structured data or interaction text"
---

Policies are deterministic rules that govern what actions your agents can perform. The Limits SDK provides two methods for checking policies: `checkConditions()` for structured data and `checkInteractions()` for text-based interactions.

## Checking Conditions

Use `checkConditions()` when you have structured data to evaluate:

```typescript
const decision = await limits.checkConditions('amount-minimum-usd', {
  amount: 500,
  currency: 'USD',
  customerId: 'cus_123',
});

if (decision.isBlocked) {
  console.error('Policy blocked:', decision.data.reason);
} else if (decision.isEscalated) {
  console.warn('Policy escalated for review:', decision.data.reason);
} else if (decision.isAllowed) {
  console.log('Policy allowed:', decision.data.reason);
}
```

## Checking Interactions

Use `checkInteractions()` when you need to evaluate text-based responses or LLM outputs:

```typescript
const decision = await limits.checkInteractions(
  'block-amount-under-9000',
  "Acknowledged. I tried to submit your payment for Order ORD-938271. Payment attempt ID PAY-4b72c1 was created at 2026-01-21 19:46:02 UTC. Amount received: 300.00 USD using method: card_visa_ending_1442."
);

if (decision.isBlocked) {
  console.error('Interaction blocked:', decision.data.reason);
}
```

## Policy Response

Both methods return a `PolicyEvaluationResult`:

```typescript
interface PolicyEvaluationResult {
  data: {
    action: 'allow' | 'block' | 'escalate';
    reason: string;
  };
  isAllowed: boolean;    // Helper: data.action === 'allow'
  isBlocked: boolean;    // Helper: data.action === 'block'
  isEscalated: boolean;  // Helper: data.action === 'escalate'
  errors?: string[];     // Validation errors (if any)
}
```

## Handling Validation Errors

When validation fails, the response includes an `errors` array:

```typescript
const decision = await limits.checkConditions('amount-minimum-usd', {
  amount: 500,
  // Missing required fields
});

if (decision.errors && decision.errors.length > 0) {
  console.error('Validation errors:');
  decision.errors.forEach((error, index) => {
    console.error(`  ${index + 1}. ${error}`);
  });
}
```

## Error Handling

The SDK throws specific error types for different failure scenarios:

```typescript
import {
  Limits,
  APIRequestError,
  NetworkError,
  InvalidAPIKeyError,
  InvalidPolicyKeyError,
  InvalidInputError,
} from '@limits/sdk';

try {
  const decision = await limits.checkConditions('amount-minimum-usd', {
    amount: 500,
    currency: 'USD',
  });
} catch (error) {
  if (error instanceof APIRequestError) {
    console.error('API error:', error.message);
    console.error('Status code:', error.statusCode);
  } else if (error instanceof NetworkError) {
    console.error('Network error:', error.message);
  } else if (error instanceof InvalidPolicyKeyError) {
    console.error('Invalid policy key');
  } else if (error instanceof InvalidInputError) {
    console.error('Invalid input:', error.message);
  }
}
```

## Next Steps

<Card title="Human Approvals" icon="user-check" href="/sdk/human-approvals">
  Learn how to manage human approval workflows.
</Card>

