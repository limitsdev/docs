---
title: "Human Approvals"
description: "List, approve, and decline human approval requests"
---

When a policy evaluation returns **`escalate`**, it creates a human approval request. The SDK provides methods to list and resolve these approvals.

## Method: `listEscalations()`

Returns all human approval records for your organization.

**Signature**

```typescript
async listEscalations(): Promise<Escalation[]>
```

**Returns:** Array of [Escalation](#escalation-object) objects.

**Throws:** `APIRequestError`, `NetworkError`.

```typescript
import { EscalationStatus } from "@limits/sdk";

const approvals = await limits.listEscalations();
const pending = approvals.filter((a) => a.status === EscalationStatus.PENDING);

for (const a of pending) {
  console.log(`Approval ${a.id} — policy ${a.policy_id} — ${a.status}`);
}
```

---

## Method: `approveEscalation(id)`

Marks a human approval request as approved.

**Signature**

```typescript
async approveEscalation(id: string): Promise<Escalation>
```

| Parameter | Type     | Required | Description                                                               |
| --------- | -------- | -------- | ------------------------------------------------------------------------- |
| `id`      | `string` | **Yes**  | UUID of the human approval (e.g. `123e4567-e89b-12d3-a456-426614174000`). |

**Returns:** Updated [Escalation](#escalation-object) (e.g. `status: 'ALLOWED'`).

**Throws**

- `InvalidInputError` — `id` not a valid UUID v4.
- `APIRequestError`, `NetworkError`.

```typescript
const updated = await limits.approveEscalation(
  "123e4567-e89b-12d3-a456-426614174000",
);
console.log("Approval status:", updated.status); // ALLOWED
```

---

## Method: `declineEscalation(id)`

Marks a human approval request as declined.

**Signature**

```typescript
async declineEscalation(id: string): Promise<Escalation>
```

| Parameter | Type     | Required | Description                 |
| --------- | -------- | -------- | --------------------------- |
| `id`      | `string` | **Yes**  | UUID of the human approval. |

**Returns:** Updated [Escalation](#escalation-object) (e.g. `status: 'DECLINED'`).

**Throws:** Same as `approveEscalation(id)`.

```typescript
const updated = await limits.declineEscalation(
  "123e4567-e89b-12d3-a456-426614174000",
);
console.log("Approval status:", updated.status); // DECLINED
```

---

## Method: `getBaseUrl()`

Returns the base URL used by the SDK (read-only).

**Signature**

```typescript
getBaseUrl(): string
```

**Returns:** `"https://api.limits.dev/api"`.

---

## Escalation object

Returned by `listEscalations()`, `approveEscalation()`, and `declineEscalation()`.

| Field             | Type                      | Description                                   |
| ----------------- | ------------------------- | --------------------------------------------- |
| `id`              | `string`                  | UUID of the approval.                         |
| `policy_id`       | `string`                  | Policy that triggered the escalation.         |
| `organization_id` | `string`                  | Your organization ID.                         |
| `status`          | `EscalationStatus`        | `PENDING`, `ALLOWED`, or `DECLINED`.          |
| `request`         | `any` (optional)          | Request payload associated with the approval. |
| `response`        | `any` (optional)          | Response payload.                             |
| `action_by`       | `string` (optional)       | ID of user who approved/declined.             |
| `action_by_user`  | `ActionByUser` (optional) | User details.                                 |
| `created_at`      | `string`                  | ISO 8601 timestamp.                           |
| `updated_at`      | `string`                  | ISO 8601 timestamp.                           |

### ActionByUser

| Field        | Type     |
| ------------ | -------- |
| `id`         | `string` |
| `first_name` | `string` |
| `last_name`  | `string` |
| `email`      | `string` |

### EscalationStatus (enum)

- `PENDING`
- `ALLOWED`
- `DECLINED`

---

## Complete example

```typescript
import { Limits, EscalationStatus } from "@limits/sdk";

const limits = new Limits({ apiKey: process.env.LIMITS_API_KEY! });

// Check a policy that might escalate
const result = await limits.check("sensitive-action", {
  amount: 10000,
  currency: "USD",
});

if (result.isEscalated) {
  console.log("Action escalated, waiting for approval...");

  const approvals = await limits.listEscalations();
  const pending = approvals.find((a) => a.status === EscalationStatus.PENDING);

  if (pending) {
    const approved = await limits.approveEscalation(pending.id);
    console.log(`Approval ${approved.id} has been approved`);
  }
}
```

---

## Error handling

The SDK validates UUID format for approval IDs:

```typescript
import { InvalidInputError } from "@limits/sdk";

try {
  await limits.approveEscalation("invalid-uuid");
} catch (error) {
  if (error instanceof InvalidInputError) {
    console.error("Invalid approval ID format");
  }
}
```

---

## API summary

| Method                         | Description                                      |
| ------------------------------ | ------------------------------------------------ |
| `limits.listEscalations()`     | List human approvals. Returns `Escalation[]`. |
| `limits.approveEscalation(id)` | Approve by UUID. Returns `Escalation`.        |
| `limits.declineEscalation(id)` | Decline by UUID. Returns `Escalation`.        |
| `limits.getBaseUrl()`          | Returns `"https://api.limits.dev/api"`.          |

**REST**

- List: `GET .../escalations`
- Approve: `POST .../escalations/approve` body `{ "id": "<uuid>" }`
- Decline: `POST .../escalations/decline` body `{ "id": "<uuid>" }`

## Next Steps

<CardGroup cols={2}>
  <Card title="Policies" icon="shield" href="/sdk/policies">
    How policies escalate to human approval.
  </Card>
  <Card title="Platform Approvals" icon="layout" href="/platform/approvals">
    Manage approvals in the web interface.
  </Card>
</CardGroup>
