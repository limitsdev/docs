---
title: "Human Approvals"
description: "List, approve, and decline human approval requests"
---

When a policy evaluation returns **`escalate`**, it creates a human approval request. The SDK provides methods to list and resolve these approvals.

## Method: `listHumanApprovals()`

Returns all human approval records for your organization.

**Signature**

```typescript
async listHumanApprovals(): Promise<HumanApproval[]>
```

**Returns:** Array of [HumanApproval](#humanapproval-object) objects.

**Throws:** `APIRequestError`, `NetworkError`.

```typescript
import { HumanApprovalStatus } from '@limits/sdk';

const approvals = await limits.listHumanApprovals();
const pending = approvals.filter((a) => a.status === HumanApprovalStatus.PENDING);

for (const a of pending) {
  console.log(`Approval ${a.id} — policy ${a.policy_id} — ${a.status}`);
}
```

---

## Method: `approveHumanApproval(id)`

Marks a human approval request as approved.

**Signature**

```typescript
async approveHumanApproval(id: string): Promise<HumanApproval>
```

| Parameter | Type     | Required | Description |
|-----------|----------|----------|-------------|
| `id`      | `string` | **Yes**  | UUID of the human approval (e.g. `123e4567-e89b-12d3-a456-426614174000`). |

**Returns:** Updated [HumanApproval](#humanapproval-object) (e.g. `status: 'ALLOWED'`).

**Throws**

- `InvalidInputError` — `id` not a valid UUID v4.
- `APIRequestError`, `NetworkError`.

```typescript
const updated = await limits.approveHumanApproval('123e4567-e89b-12d3-a456-426614174000');
console.log('Approval status:', updated.status); // ALLOWED
```

---

## Method: `declineHumanApproval(id)`

Marks a human approval request as declined.

**Signature**

```typescript
async declineHumanApproval(id: string): Promise<HumanApproval>
```

| Parameter | Type     | Required | Description |
|-----------|----------|----------|-------------|
| `id`      | `string` | **Yes**  | UUID of the human approval. |

**Returns:** Updated [HumanApproval](#humanapproval-object) (e.g. `status: 'DECLINED'`).

**Throws:** Same as `approveHumanApproval(id)`.

```typescript
const updated = await limits.declineHumanApproval('123e4567-e89b-12d3-a456-426614174000');
console.log('Approval status:', updated.status); // DECLINED
```

---

## Method: `getBaseUrl()`

Returns the base URL used by the SDK (read-only).

**Signature**

```typescript
getBaseUrl(): string
```

**Returns:** `"https://api.limits.dev/api"`.

---

## HumanApproval object

Returned by `listHumanApprovals()`, `approveHumanApproval()`, and `declineHumanApproval()`.

| Field             | Type                 | Description |
|-------------------|----------------------|-------------|
| `id`              | `string`             | UUID of the approval. |
| `policy_id`       | `string`             | Policy that triggered the escalation. |
| `organization_id` | `string`             | Your organization ID. |
| `status`          | `HumanApprovalStatus`| `PENDING`, `ALLOWED`, or `DECLINED`. |
| `request`         | `any` (optional)     | Request payload associated with the approval. |
| `response`        | `any` (optional)     | Response payload. |
| `action_by`       | `string` (optional)   | ID of user who approved/declined. |
| `action_by_user`  | `ActionByUser` (optional) | User details. |
| `created_at`      | `string`             | ISO 8601 timestamp. |
| `updated_at`      | `string`             | ISO 8601 timestamp. |

### ActionByUser

| Field         | Type     |
|---------------|----------|
| `id`          | `string` |
| `first_name`  | `string` |
| `last_name`   | `string` |
| `email`       | `string` |

### HumanApprovalStatus (enum)

- `PENDING`
- `ALLOWED`
- `DECLINED`

---

## Complete example

```typescript
import { Limits, HumanApprovalStatus } from '@limits/sdk';

const limits = new Limits({ apiKey: process.env.LIMITS_API_KEY! });

// Check a policy that might escalate
const result = await limits.check('sensitive-action', {
  amount: 10000,
  currency: 'USD',
});

if (result.isEscalated) {
  console.log('Action escalated, waiting for approval...');

  const approvals = await limits.listHumanApprovals();
  const pending = approvals.find((a) => a.status === HumanApprovalStatus.PENDING);

  if (pending) {
    const approved = await limits.approveHumanApproval(pending.id);
    console.log(`Approval ${approved.id} has been approved`);
  }
}
```

---

## Error handling

The SDK validates UUID format for approval IDs:

```typescript
import { InvalidInputError } from '@limits/sdk';

try {
  await limits.approveHumanApproval('invalid-uuid');
} catch (error) {
  if (error instanceof InvalidInputError) {
    console.error('Invalid approval ID format');
  }
}
```

---

## API summary

| Method                         | Description |
|--------------------------------|-------------|
| `limits.listHumanApprovals()`  | List human approvals. Returns `HumanApproval[]`. |
| `limits.approveHumanApproval(id)` | Approve by UUID. Returns `HumanApproval`. |
| `limits.declineHumanApproval(id)` | Decline by UUID. Returns `HumanApproval`. |
| `limits.getBaseUrl()`          | Returns `"https://api.limits.dev/api"`. |

**REST**

- List: `GET .../human-approvals`
- Approve: `POST .../human-approvals/approve` body `{ "id": "<uuid>" }`
- Decline: `POST .../human-approvals/decline` body `{ "id": "<uuid>" }`

## Next Steps

<CardGroup cols={2}>
  <Card title="Policies" icon="shield" href="/sdk/policies">
    How policies escalate to human approval.
  </Card>
  <Card title="Platform Approvals" icon="layout" href="/platform/approvals">
    Manage approvals in the web interface.
  </Card>
</CardGroup>
