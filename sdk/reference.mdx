---
title: "Reference"
description: "TypeScript types and API summary for limit-js"
---

## API Reference Summary

| Method / constructor | Description |
|----------------------|-------------|
| `new Limits(config)` | Create client. `config.apiKey` required (must start with `sk_`). |
| `limits.check(policyKeyOrTag, input)` | Evaluate **conditions** policy. `input` = object. Returns `PolicyEvaluationResult`. |
| `limits.evaluate(policyKeyOrTag, prompt, response)` | Evaluate **instructions** policy (prompt + LLM response). Returns `PolicyEvaluationResult`. |
| `limits.guard(policyKeyOrTag, input)` | Evaluate **guardrails** policy. `input` = string. Returns `PolicyEvaluationResult`. |
| `limits.listEscalations()` | List all escalations. Returns `Escalation[]`. |
| `limits.listEscalationsByPolicyId(policyId)` | List escalations by policy. Returns `Escalation[]`. |
| `limits.approveEscalation(escalationId)` | Approve escalation by ID. Returns `Escalation`. |
| `limits.declineEscalation(escalationId)` | Decline escalation by ID. Returns `Escalation`. |

### Policy key or tag

For `check`, `evaluate`, and `guard` the first argument can be:

- **Policy key** — e.g. `'amount-minimum-usd'`
- **Tag** — e.g. `'#payments'`. All policies with that tag are evaluated; strictest result wins: BLOCK → ESCALATE → ALLOW.

### Result shape (all policy methods)

```typescript
{
  data: { action: 'ALLOW' | 'BLOCK' | 'ESCALATE'; reason: string };
  isAllowed: boolean;
  isBlocked: boolean;
  isEscalated: boolean;
  errors?: string[];
}
```

---

## TypeScript types

Import types for type safety:

```typescript
import {
  Limits,
  type PolicyEvaluationResult,
  type Escalation,
  type EscalationResponse,
} from 'limit-js';
```

### Exported types

| Type | Description |
|------|-------------|
| `PolicyEvaluationResult` | Return type of `check()`, `evaluate()`, `guard()` — `data`, `isAllowed`, `isBlocked`, `isEscalated`, `errors?`. |
| `Escalation` | Escalation object: `id`, `policy_id`, `organization_id`, `status`, `request?`, `response?`, `action_by?`, `created_at`, `updated_at`. |
| `EscalationResponse` | Policy result at time of escalation: `action`, `message`, `success`, `violated`. |

---

## Errors

| Error | When |
|-------|------|
| `InvalidAPIKeyError` | Key missing or doesn't start with `sk_`. |
| `InvalidPolicyKeyError` | Policy key/tag empty or invalid. |
| `InvalidInputError` | Empty input where required. |
| `APIRequestError` | API returned 4xx/5xx (`error.statusCode`, `error.response`). |
| `NetworkError` / `TimeoutError` | Request failed or timed out. |

Use `instanceof` for handling:

```typescript
import { Limits, InvalidAPIKeyError, APIRequestError } from 'limit-js';

try {
  const decision = await limits.check('my-policy', { amount: 100 });
} catch (err) {
  if (err instanceof InvalidAPIKeyError) { /* ... */ }
  if (err instanceof APIRequestError) { /* ... */ }
  throw err;
}
```

---

## Auth

Requests use `Authorization: Bearer <apiKey>`. Get an API key from the [Limits dashboard](https://app.limits.dev) (Dashboard → API keys).
