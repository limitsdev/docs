---
title: "Policy Locks"
description: "Configure rate limiting and time-based restrictions"
---

Locks add rate limiting and time-based restrictions to policies. Each action (Allow, Block, Escalate) can have its own lock configuration.

## Limit Lock

Limit locks restrict the number or budget of actions within a time period.

### Count-Based Limits

Limit the number of actions:

- **Count**: Maximum number of actions allowed
- **Period**: Time window (minute, hour, day, week, month)

**Example**: Allow maximum 10 requests per hour

### Budget-Based Limits

Limit based on monetary value or percentage:

- **Budget Type**: Amount or Percentage
- **Amount**: Maximum value allowed
- **Currency**: Currency for amount-based limits
- **Amount Field**: Field path to the amount in the request (e.g., `request.amount`)
- **Percentage Base Field**: Field path for percentage calculations (e.g., `user.balance`)
- **Period**: Time window

**Examples**:
- Maximum $10,000 per day
- Maximum 5% of user balance per week

## Time Window Lock

Restrict actions to specific days and time ranges.

### Configuration

- **Days**: Select days of the week when actions are allowed
- **Time Range**: Start and end times (HH:mm format, 24-hour)
- **Timezone**: IANA timezone string (e.g., "America/New_York")

**Example**: Allow requests only on weekdays between 9 AM and 5 PM EST

### Use Cases

- Business hours restrictions
- Weekend blocking
- Timezone-aware scheduling

## Velocity Lock

Detect and prevent rapid request patterns that might indicate abuse.

### Configuration

- **Threshold**: Number of requests that trigger the lock
- **Time Window**: Time window in seconds
- **Hash Fields**: Fields to hash for velocity detection (e.g., `user.id`, `request.ip`)

**Example**: Block if more than 5 requests from the same user in 10 seconds

### How It Works

1. Requests are hashed based on specified fields
2. Count requests with the same hash within the time window
3. If count exceeds threshold, the lock is triggered

## Per-Action Lock Configuration

Each action type can have independent lock configurations:

- **Allow Locks**: Apply to requests that would be allowed
- **Block Locks**: Apply to requests that would be blocked
- **Escalate Locks**: Apply to requests that would be escalated

This allows fine-grained control over different action types.

<CardGroup cols={2}>
  <Card title="Policies" icon="shield" href="/platform/policies">
    Learn about policy management
  </Card>
  <Card title="Policy Conditions" icon="code" href="/platform/policy-conditions">
    Understand condition logic
  </Card>
</CardGroup>
